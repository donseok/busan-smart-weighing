# TÃ i liá»‡u Thiáº¿t káº¿ UI/UX: Há»‡ thá»‘ng CÃ¢n thÃ´ng minh Busan

## 1. KhÃ¡i niá»‡m Thiáº¿t káº¿: "Modern Industrial Intelligence"

KhÃ¡i niá»‡m UI/UX cá»§a Há»‡ thá»‘ng CÃ¢n thÃ´ng minh Busan lÃ  **"Modern Industrial Intelligence"**. ThoÃ¡t khá»i giao diá»‡n thÃ´ ká»‡ch cá»§a pháº§n má»m cÃ´ng nghiá»‡p truyá»n thá»‘ng, há»‡ thá»‘ng hÆ°á»›ng tá»›i giao diá»‡n trá»±c quan vÃ  mang tÃ­nh tÆ°Æ¡ng lai, giá»‘ng nhÆ° **trung tÃ¢m Ä‘iá»u khiá»ƒn trong phim khoa há»c viá»…n tÆ°á»Ÿng**.

### GiÃ¡ trá»‹ Cá»‘t lÃµi (Core Values)

| GiÃ¡ trá»‹ | MÃ´ táº£ |
|---------|-------|
| **Visibility (Kháº£ nÄƒng hiá»ƒn thá»‹)** | ThÃ´ng tin cá»‘t lÃµi (trá»ng lÆ°á»£ng, biá»ƒn sá»‘ xe) hiá»ƒn thá»‹ rÃµ rÃ ng trong má»i mÃ´i trÆ°á»ng: ngoÃ i trá»i/trong nhÃ , ban ngÃ y/ban Ä‘Ãªm |
| **Real-time (Thá»i gian thá»±c)** | Tiáº¿n trÃ¬nh cÃ¢n, xe vÃ o cá»•ng, káº¿t quáº£ nháº­n dáº¡ng Ä‘Æ°á»£c pháº£n há»“i tá»©c thÃ¬ khÃ´ng cÃ³ Ä‘á»™ trá»… |
| **Trust (Äá»™ tin cáº­y)** | Sá»­ dá»¥ng bá»‘ cá»¥c gá»n gÃ ng, ngÄƒn náº¯p Ä‘á»ƒ truyá»n Ä‘áº¡t trá»±c quan tÃ­nh chÃ­nh xÃ¡c cá»§a dá»¯ liá»‡u |
| **Consistency (TÃ­nh nháº¥t quÃ¡n)** | Chia sáº» cÃ¹ng má»™t ngÃ´n ngá»¯ thiáº¿t káº¿ trÃªn ba ná»n táº£ng: Web, Mobile, Desktop |

---

## 2. Nháº­n diá»‡n HÃ¬nh áº£nh & Báº£ng MÃ u

Äá»ƒ giáº£m má»i máº¯t cho nhÃ¢n viÃªn giÃ¡m sÃ¡t pháº£i theo dÃµi trong thá»i gian dÃ i vÃ  tÄƒng kháº£ nÄƒng táº­p trung thÃ´ng tin, há»‡ thá»‘ng cung cáº¥p **Cháº¿ Ä‘á»™ tá»‘i (Dark Mode)** lÃ m máº·c Ä‘á»‹nh, Ä‘á»“ng thá»i cÅ©ng há»— trá»£ **Cháº¿ Ä‘á»™ sÃ¡ng (Light Mode)**.

### 2.1 Báº£ng MÃ u (Dá»±a trÃªn Dark Theme)

ÄÆ°á»£c thiáº¿t káº¿ dá»±a trÃªn báº£ng mÃ u Tailwind CSS Slate.

| Vai trÃ² | TÃªn mÃ u | HEX | CÃ´ng dá»¥ng |
|---------|---------|-----|-----------|
| **Background Darkest** | Deep Navy | `#060D1B` | Ná»n header/footer, lá»›p sÃ¢u nháº¥t |
| **Background Base** | Dark Navy | `#0B1120` | MÃ u ná»n chÃ­nh (xanh navy tá»‘i cÃ³ chiá»u sÃ¢u) |
| **Background Elevated** | Slate 900 | `#0F172A` | Ná»n trÆ°á»ng nháº­p liá»‡u, header báº£ng |
| **Surface** | Charcoal | `#1E293B` | Ná»n tháº» (card), báº£ng Ä‘iá»u khiá»ƒn (hiá»‡u á»©ng Glassmorphism) |
| **Border** | Slate 700 | `#334155` | ÄÆ°á»ng viá»n, Ä‘Æ°á»ng phÃ¢n cÃ¡ch |
| **Primary** | Neon Cyan | `#06B6D4` | GiÃ¡ trá»‹ trá»ng lÆ°á»£ng hiá»‡n táº¡i, nÃºt chÃ­nh, tráº¡ng thÃ¡i hoáº¡t Ä‘á»™ng |
| **Primary Dark** | Cyan 700 | `#0E7490` | Hover cá»§a Primary, nháº¥n máº¡nh phá»¥ |
| **Success** | Emerald | `#10B981` | HoÃ n thÃ nh cÃ¢n, nháº­n dáº¡ng thÃ nh cÃ´ng, há»‡ thá»‘ng bÃ¬nh thÆ°á»ng |
| **Warning** | Amber | `#F59E0B` | Cáº£nh bÃ¡o, cáº§n cÃ¢n láº¡i, Ä‘á»™ tin cáº­y nháº­n dáº¡ng tháº¥p |
| **Error** | Rose | `#F43F5E` | Lá»—i, máº¥t káº¿t ná»‘i, cháº·n |
| **Text Primary** | Slate 50 | `#F8FAFC` | VÄƒn báº£n chÃ­nh |
| **Text Secondary** | Slate 400 | `#94A3B8` | VÄƒn báº£n phá»¥, nhÃ£n |
| **Text Muted** | Slate 500 | `#64748B` | VÄƒn báº£n khÃ´ng hoáº¡t Ä‘á»™ng, gá»£i Ã½ |

### 2.2 Chuyá»ƒn Ä‘á»•i Theme Tá»‘i/SÃ¡ng

Táº¥t cáº£ cÃ¡c ná»n táº£ng (Web, Desktop) Ä‘á»u há»— trá»£ chuyá»ƒn Ä‘á»•i theme Tá»‘i â†” SÃ¡ng.

| Ná»n táº£ng | PhÆ°Æ¡ng thá»©c chuyá»ƒn Ä‘á»•i | PhÆ°Æ¡ng thá»©c lÆ°u trá»¯ |
|----------|------------------------|---------------------|
| Web (React) | NÃºt toggle trÃªn vÃ¹ng header | `ThemeContext` + `localStorage` |
| Desktop (WeighingCS) | Icon toggle trÃªn HeaderBar (Tá»‘i=ğŸŒ™, SÃ¡ng=â˜€) | File `theme.dat` |

**Cáº¥u hÃ¬nh Theme Web** (`frontend/src/theme/themeConfig.ts`):

```typescript
// Ant Design 5 ConfigProvider theme token
export const darkTheme: ThemeConfig = {
  token: {
    colorPrimary: '#06B6D4',
    colorBgBase: '#0B1120',
    colorTextBase: '#F8FAFC',
    borderRadius: 8,
    fontFamily: "'Inter', 'Noto Sans KR', sans-serif",
  },
  components: {
    Card: { colorBgContainer: '#1E293B' },
    Table: { colorBgContainer: '#1E293B', headerBg: '#0F172A' },
  },
};
```

---

## 3. Há»‡ thá»‘ng Thiáº¿t káº¿ Frontend Web (React + Ant Design)

### 3.1 Cáº¥u trÃºc Bá»‘ cá»¥c

**MainLayout** (`frontend/src/layouts/MainLayout.tsx`) lÃ  bá»‘ cá»¥c cÆ¡ báº£n cá»§a táº¥t cáº£ cÃ¡c trang.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sider (cÃ³ thá»ƒ thu gá»n)  â”‚  Header (tab Ä‘iá»u hÆ°á»›ng + yÃªu thÃ­ch)  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Logo          â”‚       â”‚  â”‚ [Tab1] [Tab2] ... [+]        â”‚     â”‚
â”‚  â”‚ Má»¥c menu      â”‚       â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ - Dashboard   â”‚       â”‚  â”‚                              â”‚     â”‚
â”‚  â”‚ - Quáº£n lÃ½     â”‚       â”‚  â”‚    VÃ¹ng ná»™i dung (theo route)â”‚     â”‚
â”‚  â”‚   Ä‘iá»u phá»‘i   â”‚       â”‚  â”‚                              â”‚     â”‚
â”‚  â”‚ - TÃ¬nh tráº¡ng  â”‚       â”‚  â”‚                              â”‚     â”‚
â”‚  â”‚   cÃ¢n         â”‚       â”‚  â”‚                              â”‚     â”‚
â”‚  â”‚ - ...         â”‚       â”‚  â”‚                              â”‚     â”‚
â”‚  â”‚ Menu quáº£n trá»‹ â”‚       â”‚  â”‚                              â”‚     â”‚
â”‚  â”‚ - Dá»¯ liá»‡u    â”‚       â”‚  â”‚                              â”‚     â”‚
â”‚  â”‚   cÆ¡ sá»Ÿ       â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”‚ - Quáº£n lÃ½     â”‚       â”‚                                       â”‚
â”‚  â”‚   há»‡ thá»‘ng   â”‚       â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Äáº·c Ä‘iá»ƒm bá»‘ cá»¥c chÃ­nh**:

| Äáº·c Ä‘iá»ƒm | MÃ´ táº£ |
|-----------|-------|
| Äiá»u hÆ°á»›ng Ä‘a tab | Quáº£n lÃ½ Ä‘á»“ng thá»i tá»‘i Ä‘a 10 tab vá»›i `TabContext`, há»— trá»£ tab cá»‘ Ä‘á»‹nh (Tráº¡m cÃ¢n) |
| Thu gá»n sidebar | Tá»‘i Æ°u hÃ³a diá»‡n tÃ­ch mÃ n hÃ¬nh vá»›i tÃ­nh nÄƒng collapsible cá»§a Ant Design Sider |
| Menu theo quyá»n | Äá»‹nh nghÄ©a `roles` theo route trong `pageRegistry.ts` (ADMIN, MANAGER, DRIVER) |
| TÃ¡ch code React.lazy | Tá»‘i Æ°u táº£i ban Ä‘áº§u báº±ng cÃ¡ch lazy loading táº¥t cáº£ trang vá»›i `React.lazy` |

### 3.2 Registry Trang (pageRegistry.ts)

`pageRegistry.ts` quáº£n lÃ½ táº­p trung táº¥t cáº£ thÃ´ng tin trang, chuáº©n hÃ³a route, icon, quyá»n vÃ  lazy loading.

| ÄÆ°á»ng dáº«n | Trang | Quyá»n | MÃ´ táº£ |
|------------|-------|-------|-------|
| `/dashboard` | DashboardPage | Táº¥t cáº£ | Dashboard (3 tab: Tá»•ng quan/Thá»i gian thá»±c/PhÃ¢n tÃ­ch) |
| `/dispatch` | DispatchPage | Táº¥t cáº£ | Quáº£n lÃ½ Ä‘iá»u phá»‘i |
| `/weighing` | WeighingPage | Táº¥t cáº£ | TÃ¬nh tráº¡ng cÃ¢n |
| `/inquiry` | InquiryPage | Táº¥t cáº£ | Tra cá»©u cÃ¢n |
| `/gate-pass` | GatePassPage | Táº¥t cáº£ | Quáº£n lÃ½ phiáº¿u ra cá»•ng |
| `/slips` | SlipPage | Táº¥t cáº£ | Phiáº¿u cÃ¢n Ä‘iá»‡n tá»­ |
| `/statistics` | StatisticsPage | Táº¥t cáº£ | Thá»‘ng kÃª/BÃ¡o cÃ¡o |
| `/weighing-station` | WeighingStationPage | Táº¥t cáº£ | Äiá»u khiá»ƒn tráº¡m cÃ¢n (tab cá»‘ Ä‘á»‹nh) |
| `/monitoring` | MonitoringPage | Táº¥t cáº£ | GiÃ¡m sÃ¡t thiáº¿t bá»‹ |
| `/notices` | NoticePage | Táº¥t cáº£ | ThÃ´ng bÃ¡o |
| `/help` | HelpPage | Táº¥t cáº£ | HÆ°á»›ng dáº«n sá»­ dá»¥ng |
| `/mypage` | MyPage | Táº¥t cáº£ | Trang cÃ¡ nhÃ¢n |
| `/master/*` | Master* Pages | ADMIN, MANAGER | Quáº£n lÃ½ dá»¯ liá»‡u cÆ¡ sá»Ÿ (4 loáº¡i) |
| `/admin/*` | Admin* Pages | ADMIN | Quáº£n lÃ½ há»‡ thá»‘ng (3 loáº¡i) |

### 3.3 ThÃ nh pháº§n UI DÃ¹ng chung

#### SortableTable (Báº£ng kÃ©o tháº£ sáº¯p xáº¿p)

ThÃ nh pháº§n bao bá»c Ant Design Table há»— trá»£ kÃ©o tháº£ sáº¯p xáº¿p dá»±a trÃªn `@dnd-kit`. ÄÆ°á»£c sá»­ dá»¥ng chung trong táº¥t cáº£ trang danh sÃ¡ch.

| Äáº·c Ä‘iá»ƒm | MÃ´ táº£ |
|-----------|-------|
| KÃ©o tháº£ sáº¯p xáº¿p | Há»— trá»£ sáº¯p xáº¿p hÃ ng báº±ng kÃ©o tháº£ vá»›i `@dnd-kit/core` + `@dnd-kit/sortable` |
| fill-height | Tá»± Ä‘á»™ng Ä‘iá»u chá»‰nh chiá»u cao báº£ng theo container cha |
| PhÃ¢n trang | TÃ­ch há»£p Ant Design Pagination (kÃ­ch thÆ°á»›c trang máº·c Ä‘á»‹nh 20) |
| Responsive | Tá»± Ä‘á»™ng Ã¡p dá»¥ng cuá»™n theo kÃ­ch thÆ°á»›c container |

#### MasterCrudPage (CRUD dá»¯ liá»‡u cÆ¡ sá»Ÿ dÃ¹ng chung)

ThÃ nh pháº§n dÃ¹ng chung chuáº©n hÃ³a máº«u CRUD cho cÃ¡c trang quáº£n lÃ½: cÃ´ng ty váº­n chuyá»ƒn, xe, tráº¡m cÃ¢n, mÃ£ dÃ¹ng chung.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [TiÃªu Ä‘á» trang]       NÃºt [ThÃªm]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Ã” tÃ¬m kiáº¿m] [Tra cá»©u] [Äáº·t láº¡i]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SortableTable (danh sÃ¡ch)           â”‚
â”‚  - NÃºt sá»­a â†’ Modal chá»‰nh sá»­a       â”‚
â”‚  - NÃºt xÃ³a â†’ Popconfirm xÃ¡c nháº­n    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Modal Táº¡o/Sá»­a (Ant Design Form)    â”‚
â”‚  - Quy táº¯c xÃ¡c thá»±c chung tá»«        â”‚
â”‚    validators.ts                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### AnimatedNumber (Hoáº¡t áº£nh sá»‘)

ThÃ nh pháº§n hiá»ƒn thá»‹ sá»± thay Ä‘á»•i giÃ¡ trá»‹ sá»‘ báº±ng hoáº¡t áº£nh Ä‘áº¿m lÃªn mÆ°á»£t mÃ  trÃªn tháº» KPI cá»§a Dashboard.

#### OnboardingTour (HÆ°á»›ng dáº«n khá»Ÿi Ä‘áº§u)

HÆ°á»›ng dáº«n khá»Ÿi Ä‘áº§u cho ngÆ°á»i dÃ¹ng má»›i sá»­ dá»¥ng thÃ nh pháº§n Tour cá»§a Ant Design. HÆ°á»›ng dáº«n tá»«ng bÆ°á»›c cÃ¡c tÃ­nh nÄƒng chÃ­nh khi truy cáº­p láº§n Ä‘áº§u.

#### EmptyState (Tráº¡ng thÃ¡i khÃ´ng cÃ³ dá»¯ liá»‡u)

ThÃ nh pháº§n hÆ°á»›ng dáº«n trá»±c quan hiá»ƒn thá»‹ khi khÃ´ng cÃ³ dá»¯ liá»‡u. Káº¿t há»£p icon + mÃ´ táº£ + nÃºt hÃ nh Ä‘á»™ng.

#### FavoriteButton / FavoritesList (YÃªu thÃ­ch)

TÃ­nh nÄƒng cho phÃ©p thÃªm cÃ¡c trang thÆ°á»ng dÃ¹ng vÃ o danh sÃ¡ch yÃªu thÃ­ch Ä‘á»ƒ truy cáº­p nhanh.

### 3.4 Hooks Quáº£n lÃ½ Tráº¡ng thÃ¡i

| Hook | CÃ´ng dá»¥ng |
|------|-----------|
| `useApiCall` | Bao bá»c gá»i API (tá»± Ä‘á»™ng quáº£n lÃ½ tráº¡ng thÃ¡i loading/error) |
| `useCrudState` | Quáº£n lÃ½ tráº¡ng thÃ¡i chung trang CRUD (danh sÃ¡ch, chá»n, Ä‘iá»u khiá»ƒn modal) |
| `useKeyboardShortcuts` | ÄÄƒng kÃ½/há»§y phÃ­m táº¯t |
| `useTabVisible` | PhÃ¡t hiá»‡n tab trÃ¬nh duyá»‡t hoáº¡t Ä‘á»™ng/khÃ´ng hoáº¡t Ä‘á»™ng |
| `useWebSocket` | Quáº£n lÃ½ káº¿t ná»‘i/Ä‘Äƒng kÃ½ STOMP WebSocket |
| `useWeighingStation` | Quáº£n lÃ½ tÃ­ch há»£p logic nghiá»‡p vá»¥ Ä‘iá»u khiá»ƒn tráº¡m cÃ¢n |
| `useWeighingStationSocket` | ÄÄƒng kÃ½ WebSocket chuyÃªn dá»¥ng cho tráº¡m cÃ¢n |

### 3.5 Dashboard (DashboardPage)

Dashboard tÃ­ch há»£p gá»“m 3 tab.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Tá»•ng quan]  [Thá»i gian thá»±c]  [PhÃ¢n tÃ­ch] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tab Tá»•ng quan (OverviewTab):                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚Tá»•ng  â”‚ â”‚HoÃ n  â”‚ â”‚Äang  â”‚ â”‚LÅ©y káº¿â”‚       â”‚
â”‚  â”‚hÃ´m   â”‚ â”‚thÃ nh â”‚ â”‚tiáº¿n  â”‚ â”‚thÃ¡ng â”‚       â”‚
â”‚  â”‚nay   â”‚ â”‚hÃ´m   â”‚ â”‚hÃ nh  â”‚ â”‚      â”‚       â”‚
â”‚  â”‚  42  â”‚ â”‚nay   â”‚ â”‚   4  â”‚ â”‚ 850  â”‚       â”‚
â”‚  â”‚      â”‚ â”‚  38  â”‚ â”‚      â”‚ â”‚      â”‚       â”‚
â”‚  â”‚(AnimatedNumber)                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Biá»ƒu Ä‘á»“ xu hÆ°á»›ng â”‚ â”‚ PhÃ¢n bá»‘ theo  â”‚    â”‚
â”‚  â”‚ theo ngÃ y         â”‚ â”‚ máº·t hÃ ng      â”‚    â”‚
â”‚  â”‚ (ECharts Line)    â”‚ â”‚ (ECharts Pie) â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tab Thá»i gian thá»±c (RealtimeTab):           â”‚
â”‚  - GiÃ¡m sÃ¡t tráº¡ng thÃ¡i cÃ¢n thá»i gian thá»±c   â”‚
â”‚    dá»±a trÃªn WebSocket                        â”‚
â”‚  - Cáº­p nháº­t thay Ä‘á»•i trá»ng lÆ°á»£ng, tráº¡ng     â”‚
â”‚    thÃ¡i thiáº¿t bá»‹ theo thá»i gian thá»±c         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tab PhÃ¢n tÃ­ch (AnalysisTab):                â”‚
â”‚  - Thá»‘ng kÃª chi tiáº¿t theo ká»³/máº·t hÃ ng/      â”‚
â”‚    cháº¿ Ä‘á»™                                    â”‚
â”‚  - Biá»ƒu Ä‘á»“ tÆ°Æ¡ng tÃ¡c dá»±a trÃªn ECharts 6.0  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.6 Äiá»u khiá»ƒn Tráº¡m cÃ¢n (WeighingStationPage)

MÃ n hÃ¬nh Ä‘iá»u khiá»ƒn cá»‘t lÃµi Ä‘á»ƒ nhÃ¢n viÃªn váº­n hÃ nh tráº¡m cÃ¢n giÃ¡m sÃ¡t vÃ  Ä‘iá»u khiá»ƒn quy trÃ¬nh cÃ¢n theo thá»i gian thá»±c. Hiá»ƒn thá»‹ dÆ°á»›i dáº¡ng tab cá»‘ Ä‘á»‹nh luÃ´n náº±m trÃªn thanh tab.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Báº£ng bÃªn trÃ¡i (VÃ¹ng hiá»ƒn thá»‹) â”‚  Báº£ng bÃªn pháº£i (VÃ¹ng  â”‚
â”‚                                 â”‚  Ä‘iá»u khiá»ƒn)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ WeightDisplay         â”‚     â”‚  â”‚ ModeToggle        â”‚ â”‚
â”‚  â”‚ 45,200.5 kg  [STABLE] â”‚     â”‚  â”‚ [AUTO] / [MANUAL] â”‚ â”‚
â”‚  â”‚ (hiá»ƒn thá»‹ sá»‘ 72px)    â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚ ProcessStateBar   â”‚ â”‚
â”‚  â”‚ VehicleInfoPanel      â”‚     â”‚  â”‚ â—‹â”€â”€â”€â—‹â”€â”€â”€â—‹â”€â”€â”€â—     â”‚ â”‚
â”‚  â”‚ 12ê°€3456 | Dongkuk    â”‚     â”‚  â”‚ Chá»  CÃ¢n  á»”n Ä‘á»‹nhâ”‚ â”‚
â”‚  â”‚ Logistics             â”‚     â”‚  â”‚              Xong â”‚ â”‚
â”‚  â”‚ ThÃ©p | DIS-0101       â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚ ManualControls    â”‚ â”‚
â”‚  â”‚ ConnectionStatusBar   â”‚     â”‚  â”‚ [TÃ¬m biá»ƒn sá»‘ xe]  â”‚ â”‚
â”‚  â”‚ â— CÃ¢n â— Báº£ng Ä‘iá»‡n tá»­ â”‚     â”‚  â”‚ [Chá»n Ä‘iá»u phá»‘i]  â”‚ â”‚
â”‚  â”‚ â— Barrier â— Máº¡ng     â”‚     â”‚  â”‚ [Báº¯t Ä‘áº§u cÃ¢n]     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ WeighingHistoryTable  â”‚     â”‚  â”‚ ActionButtons     â”‚ â”‚
â”‚  â”‚ Lá»‹ch sá»­ cÃ¢n gáº§n Ä‘Ã¢y  â”‚     â”‚  â”‚ [Äáº·t láº¡i][Barrier]â”‚ â”‚
â”‚  â”‚ (SortableTable)       â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                 â”‚  â”‚ StatusLog         â”‚ â”‚
â”‚                                 â”‚  â”‚ Nháº­t kÃ½ kiá»ƒu      â”‚ â”‚
â”‚                                 â”‚  â”‚ terminal          â”‚ â”‚
â”‚                                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                 â”‚  â”‚ SimulatorPanel    â”‚ â”‚
â”‚                                 â”‚  â”‚ [DEV] TrÃ¬nh mÃ´    â”‚ â”‚
â”‚                                 â”‚  â”‚ phá»ng             â”‚ â”‚
â”‚                                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**10 thÃ nh pháº§n con** (`frontend/src/components/weighing-station/`):

| ThÃ nh pháº§n | Chá»©c nÄƒng |
|------------|-----------|
| `WeightDisplay` | Hiá»ƒn thá»‹ sá»‘ trá»ng lÆ°á»£ng thá»i gian thá»±c (monospace 72px, hiá»‡u á»©ng phÃ¡t sÃ¡ng) |
| `VehicleInfoPanel` | Hiá»ƒn thá»‹ thÃ´ng tin xe/Ä‘iá»u phá»‘i/cÃ´ng ty váº­n chuyá»ƒn (lÆ°á»›i icon 5 hÃ ng) |
| `ConnectionStatusBar` | LED tráº¡ng thÃ¡i káº¿t ná»‘i 4 thiáº¿t bá»‹ (CÃ¢n/Báº£ng Ä‘iá»‡n tá»­/Barrier/Máº¡ng) |
| `ModeToggle` | Chuyá»ƒn Ä‘á»•i cháº¿ Ä‘á»™ Tá»± Ä‘á»™ng (AUTO LPR) / Thá»§ cÃ´ng (MANUAL) |
| `ManualControls` | TÃ¬m kiáº¿m xe vÃ  Ä‘iá»u khiá»ƒn báº¯t Ä‘áº§u cÃ¢n á»Ÿ cháº¿ Ä‘á»™ thá»§ cÃ´ng |
| `ActionButtons` | NÃºt Äáº·t láº¡i, Má»Ÿ barrier, CÃ¢n láº¡i |
| `ProcessStateBar` | Hiá»ƒn thá»‹ tiáº¿n trÃ¬nh 4 bÆ°á»›c (IDLEâ†’WEIGHINGâ†’STABILIZINGâ†’COMPLETE) |
| `StatusLog` | Nháº­t kÃ½ sá»± kiá»‡n thá»i gian thá»±c kiá»ƒu terminal (ná»n tá»‘i, tá»‘i Ä‘a 200 má»¥c) |
| `SimulatorPanel` | Báº£ng mÃ´ phá»ng pháº§n cá»©ng cho phÃ¡t triá»ƒn/kiá»ƒm thá»­ |
| `WeighingHistoryTable` | Báº£ng lá»‹ch sá»­ 50 láº§n cÃ¢n gáº§n nháº¥t |

### 3.7 NguyÃªn táº¯c UX

| NguyÃªn táº¯c | MÃ´ táº£ |
|------------|-------|
| **Sound Feedback** | Káº¿t há»£p hiá»‡u á»©ng hÃ¬nh áº£nh + Ã¢m thanh khi hoÃ n thÃ nh cÃ¢n/xáº£y ra lá»—i (hiá»‡u quáº£ váº­n hÃ nh) |
| **Keyboard Shortcuts** | Truy cáº­p cÃ¡c tÃ­nh nÄƒng chÃ­nh khÃ´ng cáº§n chuá»™t (hook `useKeyboardShortcuts`) |
| **Responsive** | Tá»‘i Æ°u cho Ä‘á»™ phÃ¢n giáº£i desktop/tablet, responsive cho mobile |
| **Accessibility** | Há»— trá»£ trÃ¬nh Ä‘á»c mÃ n hÃ¬nh vá»›i thuá»™c tÃ­nh `aria-live` |
| **Auto-refresh** | Tá»± Ä‘á»™ng lÃ m má»›i dá»¯ liá»‡u thá»i gian thá»±c qua WebSocket (STOMP over SockJS) |

---

## 4. Thiáº¿t káº¿ á»¨ng dá»¥ng Di Ä‘á»™ng (Flutter)

### 4.1 NguyÃªn táº¯c Thiáº¿t káº¿

| NguyÃªn táº¯c | MÃ´ táº£ |
|------------|-------|
| **Big & Bold (Lá»›n & RÃµ rÃ ng)** | Chiá»u cao nÃºt tá»‘i thiá»ƒu **56dp** trá»Ÿ lÃªn Ä‘á»ƒ cÃ³ thá»ƒ thao tÃ¡c khi Ä‘eo gÄƒng tay |
| **High Contrast (TÆ°Æ¡ng pháº£n cao)** | Tá»‘i Ä‘a hÃ³a tÆ°Æ¡ng pháº£n Deep Navy + White/Neon Ä‘á»ƒ nhÃ¬n rÃµ dÆ°á»›i Ã¡nh náº¯ng trá»±c tiáº¿p ngoÃ i trá»i |
| **Linear Flow (Luá»“ng tuyáº¿n tÃ­nh)** | Má»—i mÃ n hÃ¬nh chá»‰ thá»±c hiá»‡n má»™t tÃ¡c vá»¥ chÃ­nh (ÄÄƒng nháº­pâ†’Chá»â†’XÃ¡c nháº­n cÃ¢nâ†’HoÃ n thÃ nh) |
| **Offline Resilience (Kháº£ nÄƒng offline)** | Bá»™ nhá»› Ä‘á»‡m offline dá»±a trÃªn SharedPreferences Ä‘á»ƒ Ä‘á»‘i phÃ³ vá»›i máº¡ng khÃ´ng á»•n Ä‘á»‹nh |

### 4.2 Báº£ng MÃ u (`app_colors.dart`)

Sá»­ dá»¥ng báº£ng mÃ u dá»±a trÃªn Tailwind Slate giá»‘ng nhÆ° Web trong Flutter.

| MÃ u | HEX | CÃ´ng dá»¥ng |
|-----|-----|-----------|
| Primary | `#06B6D4` | MÃ u nháº¥n chÃ­nh (cyan) |
| Background | `#0B1120` | Ná»n chÃ­nh |
| Surface | `#1E293B` | Ná»n tháº» |
| Success | `#10B981` | Tráº¡ng thÃ¡i hoÃ n thÃ nh |
| Warning | `#F59E0B` | Tráº¡ng thÃ¡i cáº£nh bÃ¡o |
| Error | `#F43F5E` | Tráº¡ng thÃ¡i lá»—i |

### 4.3 Cáº¥u trÃºc MÃ n hÃ¬nh (12 Screen)

```
mobile/lib/screens/
â”œâ”€â”€ login_screen.dart              # ÄÄƒng nháº­p ID/PW (hiá»‡u á»©ng Glassmorphism)
â”œâ”€â”€ home_screen.dart               # Trang chá»§ (Ä‘iá»u hÆ°á»›ng tab dÆ°á»›i cÃ¹ng)
â”œâ”€â”€ auth/
â”‚   â””â”€â”€ otp_login_screen.dart      # ÄÄƒng nháº­p OTP
â”œâ”€â”€ dispatch/
â”‚   â”œâ”€â”€ dispatch_list_screen.dart  # Danh sÃ¡ch Ä‘iá»u phá»‘i
â”‚   â””â”€â”€ dispatch_detail_screen.dart# Chi tiáº¿t Ä‘iá»u phá»‘i
â”œâ”€â”€ weighing/
â”‚   â”œâ”€â”€ weighing_progress_screen.dart  # Tiáº¿n trÃ¬nh cÃ¢n
â”‚   â””â”€â”€ otp_input_screen.dart          # Nháº­p OTP (bÃ n phÃ­m tÃ¹y chá»‰nh 6 chá»¯ sá»‘)
â”œâ”€â”€ slip/
â”‚   â”œâ”€â”€ slip_list_screen.dart      # Danh sÃ¡ch phiáº¿u cÃ¢n Ä‘iá»‡n tá»­
â”‚   â””â”€â”€ slip_detail_screen.dart    # Chi tiáº¿t phiáº¿u cÃ¢n Ä‘iá»‡n tá»­
â”œâ”€â”€ history/
â”‚   â””â”€â”€ history_screen.dart        # Lá»‹ch sá»­ cÃ¢n/Ä‘iá»u phá»‘i
â””â”€â”€ notice/
    â”œâ”€â”€ notice_screen.dart         # ThÃ´ng bÃ¡o
    â””â”€â”€ notification_list_screen.dart  # Danh sÃ¡ch thÃ´ng bÃ¡o
```

### 4.4 Thiáº¿t káº¿ MÃ n hÃ¬nh ChÃ­nh

#### MÃ n hÃ¬nh ÄÄƒng nháº­p (LoginScreen)

Tháº» Ä‘Äƒng nháº­p vá»›i hiá»‡u á»©ng Glassmorphism. Ná»n cÃ³ gradient + lÃ m má» (blur).

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     [Ná»n blur + gradient]    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ­  CÃ¢n thÃ´ng minh     â”‚  â”‚
â”‚  â”‚      Busan              â”‚  â”‚
â”‚  â”‚                        â”‚  â”‚
â”‚  â”‚  [Nháº­p mÃ£ nhÃ¢n viÃªn]   â”‚  â”‚
â”‚  â”‚  [Nháº­p máº­t kháº©u]       â”‚  â”‚
â”‚  â”‚                        â”‚  â”‚
â”‚  â”‚  [     ÄÄƒng nháº­p     ] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### MÃ n hÃ¬nh Trang chá»§ (HomeScreen)

Truy cáº­p cÃ¡c chá»©c nÄƒng chÃ­nh qua Ä‘iá»u hÆ°á»›ng tab á»Ÿ dÆ°á»›i cÃ¹ng.

| Vai trÃ² | Cáº¥u trÃºc tab |
|---------|--------------|
| MANAGER | Trang chá»§, Äiá»u phá»‘i, CÃ¢n, Phiáº¿u cÃ¢n, ThÃªm (5 tab) |
| DRIVER | Trang chá»§, Äiá»u phá»‘i, CÃ¢n, ThÃªm (4 tab) |

#### MÃ n hÃ¬nh Nháº­p OTP (OtpInputScreen)

MÃ n hÃ¬nh chuyÃªn dá»¥ng Ä‘á»ƒ nháº­p mÃ£ OTP 6 chá»¯ sá»‘ hiá»ƒn thá»‹ trÃªn báº£ng Ä‘iá»‡n tá»­.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         < XÃ¡c thá»±c OTP       â”‚
â”‚                              â”‚
â”‚        DIS-2026-0101         â”‚
â”‚   Nháº­p mÃ£ OTP 6 chá»¯ sá»‘      â”‚
â”‚         [ 04:32 ]            â”‚
â”‚                              â”‚
â”‚   [1] [2] [3] [4] [5] [6]   â”‚
â”‚                              â”‚
â”‚       [1] [2] [3]            â”‚
â”‚       [4] [5] [6]            â”‚
â”‚       [7] [8] [9]            â”‚
â”‚       [C] [0] [<]            â”‚
â”‚                              â”‚
â”‚   [      XÃ¡c thá»±c       ]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- Bá»™ Ä‘áº¿m ngÆ°á»£c 5 phÃºt (MM:SS)
- Hiá»ƒn thá»‹ nÃºt "YÃªu cáº§u láº¡i OTP" khi háº¿t háº¡n
- BÃ n phÃ­m sá»‘ tÃ¹y chá»‰nh 4x3

#### MÃ n hÃ¬nh Tiáº¿n trÃ¬nh CÃ¢n (WeighingProgressScreen)

Hiá»ƒn thá»‹ tráº¡ng thÃ¡i cÃ¢n hiá»‡n táº¡i theo tá»«ng bÆ°á»›c dáº¡ng tháº» (card).

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MÃ£ Ä‘iá»u phá»‘i: DIS-2026-0101â”‚
â”‚  12ê°€3456 | Dongkuk  [Láº§n 1] â”‚
â”‚  Logistics                   â”‚
â”‚                              â”‚
â”‚  Tráº¡ng thÃ¡i tiáº¿n trÃ¬nh  33% â”‚
â”‚  [========----------]        â”‚
â”‚  Chá»   Láº§n 1  Láº§n 2  Xong  â”‚
â”‚                              â”‚
â”‚  Tá»•ng trá»ng lÆ°á»£ng: 45,201 kgâ”‚
â”‚  Xe khÃ´ng: -                 â”‚
â”‚  Trá»ng lÆ°á»£ng rÃ²ng: -        â”‚
â”‚                              â”‚
â”‚  [      XÃ¡c thá»±c OTP     ]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- Tá»± Ä‘á»™ng lÃ m má»›i má»—i 10 giÃ¢y (Timer)
- Há»— trá»£ Pull-to-Refresh
- Hiá»ƒn thá»‹ há»™p thoáº¡i khi phÃ¡t hiá»‡n hoÃ n thÃ nh

#### Chi tiáº¿t Phiáº¿u cÃ¢n Äiá»‡n tá»­ (SlipDetailScreen)

Phiáº¿u cÃ¢n sá»‘ thay tháº¿ biÃªn lai giáº¥y. Bao gá»“m tÃ­nh nÄƒng chia sáº».

| PhÆ°Æ¡ng thá»©c chia sáº» | MÃ u icon | MÃ´ táº£ |
|---------------------|----------|-------|
| KakaoTalk | `#FEE500` | Chia sáº» qua KakaoTalk |
| SMS | `#06B6D4` | Chia sáº» qua tin nháº¯n SMS |
| KhÃ¡c | `#334155` | Báº£ng chia sáº» OS qua `share_plus` |

### 4.5 Widget DÃ¹ng chung

| Widget | CÃ´ng dá»¥ng |
|--------|-----------|
| `AppDrawer` | NgÄƒn kÃ©o Ä‘iá»u hÆ°á»›ng (menu bÃªn) |
| `StatusBadge` | Huy hiá»‡u mÃ u theo tráº¡ng thÃ¡i (Chá»=VÃ ng, Xong=Xanh lÃ¡, Lá»—i=Äá») |
| `WeightDisplayCard` | Tháº» hiá»ƒn thá»‹ trá»ng lÆ°á»£ng (3 cá»™t: Tá»•ng/Xe khÃ´ng/RÃ²ng) |

### 4.6 Quáº£n lÃ½ Tráº¡ng thÃ¡i vÃ  Äá»‹nh tuyáº¿n

| CÃ´ng nghá»‡ | Vai trÃ² |
|------------|---------|
| Provider | Quáº£n lÃ½ tráº¡ng thÃ¡i (AuthProvider, DispatchProvider) |
| GoRouter | Äá»‹nh tuyáº¿n khai bÃ¡o + chuyá»ƒn hÆ°á»›ng xÃ¡c thá»±c |
| Dio | HTTP client + JWT interceptor |
| flutter_secure_storage | LÆ°u trá»¯ token an toÃ n |
| Firebase Messaging | ThÃ´ng bÃ¡o Ä‘áº©y FCM (KÃªnh Android: `busan_weighing_channel`) |

---

## 5. Thiáº¿t káº¿ ChÆ°Æ¡ng trÃ¬nh Desktop (WeighingCS - C# WinForms)

### 5.1 Há»‡ thá»‘ng Thiáº¿t káº¿

WeighingCS triá»ƒn khai giao diá»‡n dark theme cáº¥p Ä‘á»™ web trÃªn WinForms thÃ´ng qua custom rendering báº±ng GDI+. Táº¥t cáº£ cÃ¡c Ä‘iá»u khiá»ƒn Ä‘Æ°á»£c váº½ trá»±c tiáº¿p trong `OnPaint` (AntiAlias, ClearTypeGridFit).

#### Design Token Theme (`Controls/Theme.cs`)

Há»‡ thá»‘ng design token quáº£n lÃ½ táº­p trung, sá»­ dá»¥ng báº£ng mÃ u Tailwind Slate giá»‘ng nhÆ° Web.

| Danh má»¥c | Token | GiÃ¡ trá»‹ | CÃ´ng dá»¥ng |
|----------|-------|---------|-----------|
| Ná»n | `BgDarkest` | `#060D1B` | Header/Footer |
| Ná»n | `BgBase` | `#0B1120` | Ná»n chÃ­nh |
| Ná»n | `BgElevated` | `#0F172A` | TrÆ°á»ng nháº­p liá»‡u |
| Ná»n | `BgSurface` | `#1E293B` | Tháº» (Card) |
| MÃ u | `Primary` | `#06B6D4` | MÃ u nháº¥n chÃ­nh |
| MÃ u | `Success` | `#10B981` | ThÃ nh cÃ´ng |
| MÃ u | `Warning` | `#F59E0B` | Cáº£nh bÃ¡o |
| MÃ u | `Error` | `#F43E5E` | Lá»—i |
| Tá»· lá»‡ | `FontScale` | `1.5f` | Há»‡ sá»‘ kÃ­ch thÆ°á»›c phÃ´ng chá»¯ |
| Tá»· lá»‡ | `LayoutScale` | `1.25f` | Há»‡ sá»‘ bá»‘ cá»¥c/khoáº£ng cÃ¡ch |

**Há»‡ thá»‘ng PhÃ´ng chá»¯**:

| Token | PhÃ´ng chá»¯ | KÃ­ch thÆ°á»›c | CÃ´ng dá»¥ng |
|-------|-----------|------------|-----------|
| `FontBody` | Segoe UI | 9.5pt Ã— FontScale | Ná»™i dung |
| `FontHeading` | Segoe UI Bold | 11pt Ã— FontScale | TiÃªu Ä‘á» |
| `FontCaption` | Segoe UI | 8pt Ã— FontScale | ChÃº thÃ­ch |
| `FontMono` | Consolas | 10pt Ã— FontScale | Monospace |
| `FontMonoLarge` | Consolas Bold | 32pt Ã— FontScale | Hiá»ƒn thá»‹ trá»ng lÆ°á»£ng |

**Tiá»‡n Ã­ch chung**: CÃ¡c hÃ m chuyá»ƒn Ä‘á»•i mÃ u `WithAlpha()`, `Lighten()`, `Darken()`, `Blend()`.

> **LÆ°u Ã½**: PhÃ´ng chá»¯ Theme lÃ  bá»™ nhá»› Ä‘á»‡m tÄ©nh nÃªn khÃ´ng Ä‘Æ°á»£c tham chiáº¿u báº±ng `using var`. `InvalidateFontCache()` chá»‰ Ä‘áº·t tham chiáº¿u thÃ nh null mÃ  khÃ´ng Dispose (cÃ¡c Ä‘iá»u khiá»ƒn váº«n cÃ³ thá»ƒ Ä‘ang tham chiáº¿u phÃ´ng chá»¯ trÆ°á»›c Ä‘Ã³, Dispose sáº½ gÃ¢y ra ngoáº¡i lá»‡ "Parameter is not valid").

### 5.2 Cáº¥u trÃºc Bá»‘ cá»¥c

Bá»‘ cá»¥c 3 pháº§n: HeaderBar(Top) â†’ panelContent(Fill: Left+Divider+Right) â†’ StatusFooter(Bottom)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HeaderBar (Dock.Top, 56px)                          â”‚
â”‚  [DK] Há»‡ thá»‘ng CÃ¢n thÃ´ng minh   â—CÃ¢n â—Báº£ng ÄT... HH:mmâ”‚
â”‚       Busan                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  panelLeftCol     â”‚ â”‚  panelRightCol (Dock.Fill)     â”‚
â”‚  (420px, 35%)     â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚ ModeToggle (44px)        â”‚  â”‚
â”‚  â”‚WeightDisplay â”‚ â”‚ â”‚  â”‚ ProcessStepBar (64px)    â”‚  â”‚
â”‚  â”‚(220px, phÃ¡t  â”‚ â”‚ â”‚  â”‚ CardManual (185px)       â”‚  â”‚
â”‚  â”‚ sÃ¡ng)        â”‚ â”‚ â”‚  â”‚ CardActions (88px)       â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚  â”‚ CardSimulator (130px)    â”‚  â”‚
â”‚  â”‚CardVehicle   â”‚ â”‚ â”‚  â”‚ TerminalLog (Fill)       â”‚  â”‚
â”‚  â”‚(250px, 5 hÃ ng)â”‚ â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚                                â”‚
â”‚  â”‚CardHistory   â”‚ â”‚ â”‚                                â”‚
â”‚  â”‚(Fill, danh   â”‚ â”‚ â”‚                                â”‚
â”‚  â”‚ sÃ¡ch)        â”‚ â”‚ â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  StatusFooter (Dock.Bottom, 32px)                    â”‚
â”‚  Tráº¡m cÃ¢n#1 Â· COM1 Â· 9600bps  â— Cháº¿ Ä‘á»™ tá»± Ä‘á»™ng     â”‚
â”‚  v1.0.0 HH:mm:ss                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Äiá»u khiá»ƒn TÃ¹y chá»‰nh (16 loáº¡i)

| Äiá»u khiá»ƒn | MÃ´ táº£ |
|------------|-------|
| **HeaderBar** | Header trÃªn cÃ¹ng (logo, tiÃªu Ä‘á», toggle theme, LED thiáº¿t bá»‹, Ä‘á»“ng há»“ thá»i gian thá»±c) |
| **StatusFooter** | Thanh tráº¡ng thÃ¡i dÆ°á»›i cÃ¹ng (thÃ´ng tin tráº¡m cÃ¢n, cháº¿ Ä‘á»™, tráº¡ng thÃ¡i Ä‘á»“ng bá»™, thá»i gian) |
| **WeightDisplayPanel** | Hiá»ƒn thá»‹ sá»‘ trá»ng lÆ°á»£ng lá»›n (hiá»‡u á»©ng phÃ¡t sÃ¡ng, huy hiá»‡u á»•n Ä‘á»‹nh) |
| **CardPanel** | Container tháº» hiá»‡u á»©ng kÃ­nh (bÃ³ng Ä‘á»•, thanh accent) |
| **ModernButton** | 3 loáº¡i nÃºt (Primary/Secondary/Danger, highlight kÃ­nh) |
| **ModernToggle** | Toggle trÆ°á»£t (chuyá»ƒn Ä‘á»•i cháº¿ Ä‘á»™ Tá»± Ä‘á»™ng/Thá»§ cÃ´ng, hoáº¡t áº£nh) |
| **ModernTextBox** | Nháº­p vÄƒn báº£n (viá»n bo trÃ²n, phÃ¡t sÃ¡ng khi focus, placeholder) |
| **ModernComboBox** | ComboBox (dropdown tÃ¹y chá»‰nh, hiá»‡u á»©ng focus) |
| **ModernCheckBox** | CheckBox (váº½ GDI+ tÃ¹y chá»‰nh, hiá»‡u á»©ng hover) |
| **ModernListView** | ListView (mÃ u hÃ ng xen káº½, header tÃ¹y chá»‰nh, cá»™t cuá»‘i tá»± Ä‘á»™ng láº¥p Ä‘áº§y) |
| **ModernProgressBar** | Thanh tiáº¿n trÃ¬nh (dÃ¹ng cho mÃ n hÃ¬nh splash) |
| **ProcessStepBar** | Hiá»ƒn thá»‹ quy trÃ¬nh 4 bÆ°á»›c (chá»‰ bÃ¡o hÃ¬nh trÃ²n, dáº¥u tÃ­ch) |
| **TerminalLogPanel** | Báº£ng nháº­t kÃ½ kiá»ƒu terminal (trang trÃ­ traffic light kiá»ƒu macOS) |
| **RoundedRectHelper** | Tiá»‡n Ã­ch GraphicsPath hÃ¬nh chá»¯ nháº­t bo trÃ²n |
| **ConnectionStatusPanel** | [Káº¿ thá»«a] Báº£ng tráº¡ng thÃ¡i káº¿t ná»‘i (Ä‘Ã£ thay tháº¿ bá»Ÿi HeaderBar) |
| **LedIndicator** | [Káº¿ thá»«a] Chá»‰ bÃ¡o LED (Ä‘Ã£ thay tháº¿ bá»Ÿi HeaderBar) |

### 5.4 Chi tiáº¿t Äiá»u khiá»ƒn Cá»‘t lÃµi

#### WeightDisplayPanel (Hiá»ƒn thá»‹ Trá»ng lÆ°á»£ng)

| ThÃ nh pháº§n | MÃ´ táº£ |
|------------|-------|
| Ná»n | Gradient dá»c BgElevatedâ†’BgSurface + lá»›p phá»§ kÃ­nh |
| VÄƒn báº£n trá»ng lÆ°á»£ng | Consolas 32~72pt Bold (tá»· lá»‡ theo chiá»u rá»™ng) |
| Hiá»‡u á»©ng phÃ¡t sÃ¡ng | 4 lá»›p phÃ¡t sÃ¡ng Primary khi Stable |
| Huy hiá»‡u á»•n Ä‘á»‹nh | STABLE(xanh lÃ¡)/UNSTABLE(vÃ ng)/ERROR(Ä‘á»), tháº» tÃ´ trÃ²n |
| Accent trÃ¡i | Thanh dá»c 4px theo tráº¡ng thÃ¡i |

#### ProcessStepBar (BÆ°á»›c Quy trÃ¬nh)

```
â—‹â”€â”€â”€â”€â”€â—‹â”€â”€â”€â”€â”€â—‹â”€â”€â”€â”€â”€â—
Chá»    CÃ¢n    á»”n Ä‘á»‹nh  Xong     [Xong â—]
```

| Tráº¡ng thÃ¡i | Biá»ƒu diá»…n trá»±c quan |
|------------|---------------------|
| BÆ°á»›c hoÃ n thÃ nh | HÃ¬nh trÃ²n tÃ´ mÃ u Primary + dáº¥u tÃ­ch tráº¯ng, Ä‘Æ°á»ng ná»‘i Primary |
| BÆ°á»›c hiá»‡n táº¡i | Viá»n Primary + cháº¥m giá»¯a + phÃ¡t sÃ¡ng, nhÃ£n Bold |
| BÆ°á»›c tÆ°Æ¡ng lai | HÃ¬nh trÃ²n viá»n Border, nhÃ£n TextMuted |

#### TerminalLogPanel (Nháº­t kÃ½ Terminal)

- Ná»n tá»‘i (`#0D1117`) + phÃ´ng chá»¯ monospace
- Trang trÃ­ header kiá»ƒu traffic light macOS (hÃ¬nh trÃ²n Ä‘á»/vÃ ng/xanh lÃ¡)
- MÃ u theo má»©c nháº­t kÃ½: info(xÃ¡m), success(xanh neon), warning(vÃ ng), error(Ä‘á»)
- Giá»¯ tá»‘i Ä‘a 200 má»¥c nháº­t kÃ½, tá»± Ä‘á»™ng cuá»™n

### 5.5 Giao tiáº¿p Pháº§n cá»©ng

| Thiáº¿t bá»‹ | Giao thá»©c | Dá»‹ch vá»¥ |
|----------|-----------|---------|
| Indicator cÃ¢n | Cá»•ng ná»‘i tiáº¿p (COM) | `IndicatorService` |
| Báº£ng Ä‘iá»‡n tá»­ | TCP Socket | `DisplayBoardService` |
| Barrier | TCP Socket | `BarrierService` |
| MÃ¡y chá»§ Backend | REST API (HTTP) | `ApiService` |

**Trá»«u tÆ°á»£ng hÃ³a dá»±a trÃªn Interface**: CÃ³ thá»ƒ thay tháº¿ giá»¯a pháº§n cá»©ng thá»±c vÃ  trÃ¬nh mÃ´ phá»ng vá»›i `ILprCamera`, `IVehicleDetector`, `IVehicleSensor`.

**Cháº¿ Ä‘á»™ Simulator**: CÃ³ thá»ƒ phÃ¡t triá»ƒn/kiá»ƒm thá»­ mÃ  khÃ´ng cáº§n pháº§n cá»©ng thá»±c (LprCameraSimulator, VehicleDetectorSimulator, VehicleSensorSimulator).

### 5.6 MÃ n hÃ¬nh Splash (SplashForm)

MÃ n hÃ¬nh splash hiá»ƒn thá»‹ tráº¡ng thÃ¡i khá»Ÿi táº¡o khi khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng.

- Ná»n gradient + hiá»‡u á»©ng phÃ¡t sÃ¡ng hÆ°á»›ng tÃ¢m
- Hiá»ƒn thá»‹ tráº¡ng thÃ¡i tiáº¿n trÃ¬nh khá»Ÿi táº¡o báº±ng ModernProgressBar
- Hiá»ƒn thá»‹ logo + tÃªn há»‡ thá»‘ng + thÃ´ng tin phiÃªn báº£n

---

## 6. TÃ­nh nháº¥t quÃ¡n Thiáº¿t káº¿ Äa ná»n táº£ng

### 6.1 Ãnh xáº¡ ThÃ nh pháº§n Web â†” Desktop

| Web (React) | Desktop (C# WinForms) | Sá»± khÃ¡c biá»‡t triá»ƒn khai |
|------------|------------------------|--------------------------|
| `WeightDisplay` | `WeightDisplayPanel` | Váº½ trá»±c tiáº¿p báº±ng GDI+ |
| `VehicleInfoPanel` | `CardPanel` + `TableLayoutPanel` | Báº£ng 5 hÃ ng trong tháº» |
| `ConnectionStatusBar` | `HeaderBar` (LED tÃ­ch há»£p) | TÃ­ch há»£p vÃ o header |
| `ModeToggle` | `ModernToggle` | Hoáº¡t áº£nh trÆ°á»£t |
| `ManualControls` | `CardPanel` + `ModernTextBox/ComboBox` | Máº«u Wrapper |
| `ActionButtons` | `CardPanel` + `ModernButton` | 3 loáº¡i nÃºt |
| `ProcessStateBar` | `ProcessStepBar` | Chá»‰ bÃ¡o hÃ¬nh trÃ²n |
| `StatusLog` | `TerminalLogPanel` | Traffic light macOS |
| `SimulatorPanel` | `CardPanel` + `ModernCheckBox/Button` | Toggle trÃ¬nh mÃ´ phá»ng |
| `WeighingHistoryTable` | `ModernListView` | OwnerDraw ListView |
| â€” | `StatusFooter` | Thanh dÆ°á»›i cÃ¹ng chá»‰ cÃ³ trÃªn Desktop |

### 6.2 NguyÃªn táº¯c Thiáº¿t káº¿ Chung

| NguyÃªn táº¯c | Web | Di Ä‘á»™ng | Desktop |
|------------|-----|---------|---------|
| Báº£ng mÃ u | Ant Design Theme Token | `app_colors.dart` | `Theme.cs` |
| Cháº¿ Ä‘á»™ tá»‘i | `ThemeContext` | Cá»‘ Ä‘á»‹nh tá»‘i | Toggle Tá»‘i/SÃ¡ng |
| Giao tiáº¿p thá»i gian thá»±c | STOMP WebSocket | Polling 10 giÃ¢y | REST API + COM |
| Há»— trá»£ offline | â€” | SharedPreferences | SQLite |
| MÃ u tráº¡ng thÃ¡i | `colors.success/warning/error` | Material Colors | Theme.Success/Warning/Error |

---

## 7. Tham kháº£o Mockup Thiáº¿t káº¿

### Mockup Dashboard Web
![Smart Weighing Dashboard Mockup](smart_weighing_dashboard_mockup_1769582079553.png)

### Mockup á»¨ng dá»¥ng Di Ä‘á»™ng
![Smart Weighing Mobile App Mockup](smart_weighing_mobile_app_mockup_1769582889213.png)
